# System Design HW 1
## Домашнее задание №1. Социальная сеть для путешествеников

[Задание из курса System Design](https://balun.courses/courses/system_design)

## Задание:

- Сущесвует заказчик социальной сети для путешественников, которые имеют определенные ожидания от сети
- Необходимо формализовать функциональные и нефункциональные требовния к системе
- Оценить загрузку на приложение

## Функциональные требования:
- Существует регистрация пользователй, авторизация пользователей  
-  Пользователи имеют возможность подписываться на новости как определенных людей, так и на конкретные страны/места
- Отображение постов пользователей, на которые оформлена подписка будет в хронологическом порядке сначала самые новые
- Есть возможность в одном посте прикреплять фото, добавлять геометку и указывать геопозицию
- У поста будут также четыре параметра: кол-во просмотров, кол-во лайков, кол-во коментов и сами коменты
- Коментарии можно добавлять,удалять,обновлять,оценивать. Автор поста также имеет право удалять чужие коментарии
- Возможность нотификации пользователя, если автор, на которого он подписан, выложил новый пост, а сам пользователь прожал кнопку "Уведомлять о новых постах" конкретного автора
- Существует посик авторов постов и возможность подписыватсья на них, а также отписываться
- Существует раздел, в котором пользователю будут предложены посты, авторы, места, которые были самые просматреваемые за последние 24 часа
- Помимо просмотра ленты, пользователь может просматриввать все посты определенного автора

## Нефункциональные требования:
- DAU - 10 000 000
- В среднем на одного пользователя будет создаваться один пост и писатся 3 коментария
- Регион пользователей: СНГ
- В "сезон отпусков" вторая половина лета - сентябрь будет повышатсья кол-во уникальных пользователей в день
- Все данные (юзеры, их посты и коменты) храняться всегда
- Максимальное количество подписок и подписчиков не ограничено
- Новый пост подписчики могут увидеть не позже чем за 1 минуту после нажатия автором кнопки опубликовать. Нотификация должна приходить в течении 5 минут
- Система может быть недоступна не более нескольких часов в год
- Система должна работаь на мобиле и в браузере

## Оценка нагрузки
- DAU = 10 000 000  Предположим, что в среднем пользвоатель будет загружать один пост в день, писать 5 коментариев, посещать 7 авторов в день и смотреть ленту 10 раз в день 
Тогда средний RPS будет следующим:
```
Посты
 RPS = 10 000 000 * 1 / 86400 = 115
 // Один пост в среднем весит 1Мб 
 Traffic = 115 * 1Мб = 115Мб/с
 
 RPS коментариев 
 RPS = 10 000 000 * 5 / 86400 = 580
 Traffic = 580 *[ 50 (в среднем под постом) * 1Кб(вес одного коментария) ]= 29 000Кб/с = 29Мб/с
 
 RPS посещений страниц авторов
 RPS = 10 000 000 * 7 / 86400 = 810
 Traffic = 810 *[ 30 (среднее кол-во постов) * 1Мб + 512Кб (информация о юзере) ]= 24705 Мб/с = 24 Гб/с
 
 RPS просмотра ленты
 PRS = 10 000 000 * 10 / 86400 = 1200
 Traffic = 1200 * 2МБ (пусть юзер смотрит в реднем 2 поста в секунду) = 2400 Мб/с = 2,5Гб/с
```
Исходня из этих данных система будет чаще всего использоваться на чтение, чем на запись, а самый нагруженный сегмент системы - страничка авторов новостей.

Потребуется памяти:
```
10 000 000 пользователей из которых будет 1 000 000 аткивынх авторов, у которых в среднем будет 30 постов в ленте
```
Тогда всего памяти нам понадобится
```
9 000 000 * 1,5Мб + 1 000 000 * 31 = 45Тб
```

Количество одновременных посещений:
```
Connections = 10 000 000 * 0.1 = 1 000 000
```
